<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Lesson Plan - Mekail Hossain</title>
    <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; height: 100vh; background: #f1f5f9; }
        .wrapper { display: flex; height: 100vh; }
        .form-side { width: 33%; background: white; padding: 20px; border-right: 2px solid #cbd5e1; overflow-y: auto; }
        .review-side { width: 67%; padding: 30px; background: #475569; overflow-y: auto; display: flex; justify-content: center; }
        .ai-box { background: #eff6ff; padding: 15px; border-radius: 12px; border: 1px solid #3b82f6; margin-bottom: 20px; }
        .btn-ai { background: #1e40af; color: white; border: none; padding: 12px; width: 100%; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .btn-ai:disabled { background: #94a3b8; }
        .paper { background: white; width: 100%; max-width: 800px; padding: 50px; font-family: 'Tiro Bangla', serif; min-height: 1000px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        table, td { border: 1px solid black; padding: 12px; vertical-align: top; }
        input, textarea { width: 100%; padding: 10px; margin-top: 8px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        textarea { height: 80px; }
        @media print { .form-side, .btn-ai { display: none; } .review-side { width: 100%; background: white; } .paper { box-shadow: none; } }
    </style>
</head>
<body>

<div class="wrapper">
    <aside class="form-side">
        <div class="ai-box">
            <h3 style="margin:0; color:#1e40af;">AI স্মার্ট লেসন প্ল্যানার</h3>
            <input type="text" id="aiTopic" placeholder="টপিক লিখুন (যেমন: My School)">
            <button class="btn-ai" id="genBtn" onclick="generatePlan()">AI দিয়ে তৈরি করুন</button>
            <div id="status" style="font-size:12px; color: red; margin-top:10px; font-weight: bold;"></div>
        </div>
        <input type="text" id="inSchool" value="৫১নং গোলখালী সরকারি প্রাথমিক বিদ্যালয়" oninput="sync()">
        <input type="text" id="inName" value="মো: মিকাইল হোসেন" oninput="sync()">
        <textarea id="inOutcomes" placeholder="Learning Outcomes" oninput="sync()"></textarea>
        <textarea id="inIntro" placeholder="Introduction" oninput="sync()"></textarea>
        <textarea id="inPres" placeholder="Presentation" oninput="sync()"></textarea>
        <textarea id="inPrac" placeholder="Practice" oninput="sync()"></textarea>
        <textarea id="inAss" placeholder="Assessment" oninput="sync()"></textarea>
    </aside>

    <main class="review-side">
        <div class="paper">
            <div style="text-align:center;">
                <h1 id="viewSchool">বিদ্যালয়ের নাম</h1>
                <h3 style="border: 2px solid black; display: inline-block; padding: 5px 20px;">Daily Lesson Plan</h3>
            </div>
            <p><strong>শিক্ষক:</strong> <span id="viewName"></span></p>
            <table>
                <tr><td width="30%">Outcomes</td><td id="viewOutcomes"></td></tr>
                <tr><td>Introduction</td><td id="viewIntro"></td></tr>
                <tr><td>Presentation</td><td id="viewPres"></td></tr>
                <tr><td>Practice</td><td id="viewPrac"></td></tr>
                <tr><td>Assessment</td><td id="viewAss"></td></tr>
            </table>
        </div>
    </main>
</div>

<script>
    // আপনার কি-টি এখানে সরাসরি বসিয়ে দিলাম
    const API_KEY = "AIzaSyAjpj1DD5p1BXjYENF94Kg3Bz6S24dty-Q";

    function sync() {
        const ids = ['School', 'Name', 'Outcomes', 'Intro', 'Pres', 'Prac', 'Ass'];
        ids.forEach(id => {
            document.getElementById('view' + id).innerText = document.getElementById('in' + id).value;
        });
    }

    async function generatePlan() {
        const topic = document.getElementById('aiTopic').value;
        const status = document.getElementById('status');
        const btn = document.getElementById('genBtn');

        if(!topic) return alert("টপিক লিখুন!");

        btn.disabled = true;
        status.style.color = "blue";
        status.innerText = "এআই আপনার জন্য লিখছে... দয়া করে ১০-১৫ সেকেন্ড অপেক্ষা করুন।";

        const prompt = `Create a short primary school English lesson plan on: "${topic}". Response must strictly follow this order:

